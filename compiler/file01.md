電腦如何完成像 1 + 1 這樣的簡單運算


1. 指令集架構（ISA）
每個CPU都有一套指令集架構（Instruction Set Architecture, ISA），這是一組指令，CPU可以執行這些指令來完成各種操作。不同的CPU可能有不同的ISA，例如x86、ARM等。


2. 編譯器和機器碼
當你寫下一個簡單的數學運算如1 + 1時，這個高級語言（如C、Python等）會被編譯器或解釋器轉換成機器碼，這些機器碼是由ISA定義的指令。以x86架構為例，1 + 1可能會被轉換成如下的機器碼指令：
MOV EAX, 1   ; 將數字1載入寄存器EAX
ADD EAX, 1   ; 將數字1加到寄存器EAX中


3. CPU 的工作流程
3.1 取指令（Fetch）
CPU從內存中取出下一條要執行的指令，這由程序計數器（Program Counter, PC）指向。

3.2 解碼（Decode）
取出的機器碼指令被解碼器（Decoder）解碼成相應的操作和操作數。例如，MOV EAX, 1會被解碼成“將數字1移動到寄存器EAX”。

3.3 執行（Execute）
解碼後的指令被送到相應的執行單元（如算術邏輯單元ALU）。在ADD EAX, 1這條指令中，ALU會執行加法操作，將EAX中的值與1相加。

3.4 寫回（Write Back）
執行結果寫回到相應的寄存器或內存中。在這個例子中，加法的結果會寫回到寄存器EAX。


4. 具體例子分析
假設我們有如下的高級語言代碼：


int result = 1 + 1;



編譯
編譯器會將這段代碼轉換成機器碼指令。例如，在x86架構下可能如下：


MOV EAX, 1   ; 將數字1載入寄存器EAX
ADD EAX, 1   ; 將數字1加到寄存器EAX中
MOV [result], EAX ; 將EAX中的值存儲到內存中的result變量


執行
取指令：CPU從內存中取出MOV EAX, 1指令。
解碼：CPU解碼指令為“將數字1移動到寄存器EAX”。
執行：CPU執行這個操作，將1放入EAX寄存器。
取指令：CPU取出下一條指令ADD EAX, 1。
解碼：CPU解碼指令為“將數字1加到寄存器EAX中”。
執行：CPU執行這個操作，將EAX中的值（現在是1）加上1，結果是2，並將其放回EAX。
取指令：CPU取出MOV [result], EAX指令。
解碼：CPU解碼指令為“將EAX中的值存儲到內存中的result變量”。
執行：CPU將EAX中的值（2）寫入內存中的result變量。


5. 寄存器與內存
寄存器是CPU內部的高速存儲單元，用於臨時存儲數據和指令。在上述例子中，EAX就是一個寄存器。內存則是外部存儲，用於存放程序和數據。

6. 算術邏輯單元（ALU）
ALU是CPU中的一個關鍵組件，專門負責執行各種算術和邏輯操作。在ADD EAX, 1指令中，ALU會進行加法運算。

7. 控制單元（CU）
控制單元負責指揮和協調CPU內部的各個組件，確保指令的正確執行。

通過這些步驟，CPU能夠快速而有效地執行像1 + 1這樣的簡單運算。當然，現代CPU的架構和運作遠比上述描述要複雜得多，但基本原理是一致的。